datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model address {
  address_id     Int          @id
  address        String?      @db.VarChar(255)
  location       String?      @db.VarChar(255)
  post_office_id Int?
  customer_id    Int?
  post_office    post_office? @relation(fields: [post_office_id], references: [post_office_id], onDelete: NoAction, onUpdate: NoAction)
  delivery       delivery[]
}

model area {
  area_id     Int           @id
  area_name   String?       @db.VarChar(100)
  post_office post_office[]
  sub_area    sub_area[]
}

model delivery {
  delivery_id          Int         @id
  transaction_id       Int?
  recipient_address_id Int?
  recipient_name       String?     @db.VarChar(100)
  address              address?    @relation(fields: [recipient_address_id], references: [address_id], onDelete: NoAction, onUpdate: NoAction)
  mail_item            mail_item[]
}

model employee {
  employee_id          Int          @id
  employment_status    String?      @db.VarChar(50)
  employee_name        String?      @db.VarChar(100)
  employee_category_id Int?
  post_office_id       Int?
  telephone            String?      @db.VarChar(15)
  email                String?      @db.VarChar(100)
  password             String?      @db.VarChar(255)
  post_office          post_office? @relation(fields: [post_office_id], references: [post_office_id], onDelete: NoAction, onUpdate: NoAction)
  postman              postman[]
}

model mail_item {
  mail_item_id       Int                 @id
  category_id        Int?
  bundle_id          Int?
  delivery_id        Int?
  weight             Decimal?            @db.Decimal(10, 2)
  price              Decimal?            @db.Decimal(10, 2)
  mail_item_category mail_item_category? @relation(fields: [category_id], references: [mail_item_category_id], onDelete: NoAction, onUpdate: NoAction)
  delivery           delivery?           @relation(fields: [delivery_id], references: [delivery_id], onDelete: NoAction, onUpdate: NoAction)
}

model mail_item_category {
  mail_item_category_id       Int         @id
  category_name               String?     @db.VarChar(100)
  category_price_per1g_per1km Decimal?    @db.Decimal(10, 2)
  mail_item                   mail_item[]
}

model post_office {
  post_office_id          Int        @id
  post_office_category_id Int?
  post_office_name        String?    @db.VarChar(100)
  location                String?    @db.VarChar(255)
  area_id                 Int?
  head_office_post_id     Int?
  address                 address[]
  employee                employee[]
  area                    area?      @relation(fields: [area_id], references: [area_id], onDelete: NoAction, onUpdate: NoAction)
}

model postman {
  employee_id Int
  sub_area_id Int
  employee    employee @relation(fields: [employee_id], references: [employee_id], onDelete: NoAction, onUpdate: NoAction)
  sub_area    sub_area @relation(fields: [sub_area_id], references: [sub_area_id], onDelete: NoAction, onUpdate: NoAction)

  @@id([employee_id, sub_area_id])
}

model sub_area {
  sub_area_id   Int       @id
  sub_area_name String?   @db.VarChar(100)
  area_id       Int?
  postman       postman[]
  area          area?     @relation(fields: [area_id], references: [area_id], onDelete: NoAction, onUpdate: NoAction)
}
